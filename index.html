<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Online Shopping Store</title>

<!-- BOOTSTRAP CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: #f4f6f9;
}

.container-box {
    max-width: 400px;
    margin: 80px auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.dashboard {
    display: none;
}

.cart {
    background: white;
    padding: 20px;
    margin-top: 20px;
    border-radius: 10px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

.cart:hover {
    transform: scale(1.01);
}

table th {
    background: #0d6efd;
    color: white;
}

.bill {
    border-top: 2px dashed #ccc;
    margin-top: 15px;
    padding-top: 10px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="container-box" id="loginBox">
    <h3 class="text-center">Login</h3>
    <input class="form-control mb-2" id="loginEmail" placeholder="Email">
    <input type="password" class="form-control mb-2" id="loginPassword" placeholder="Password">
    <button class="btn btn-primary w-100" onclick="login()">Login</button>
    <div class="text-center mt-2 text-primary" style="cursor:pointer" onclick="showRegister()">Register</div>
    <div class="text-center text-danger" style="cursor:pointer" onclick="adminLogin()">Admin Login</div>
</div>

<!-- REGISTER -->
<div class="container-box" id="registerBox" style="display:none;">
    <h3 class="text-center">Register</h3>
    <input class="form-control mb-2" id="regEmail" placeholder="Email">
    <input type="password" class="form-control mb-2" id="regPassword" placeholder="Password">
    <button class="btn btn-success w-100" onclick="register()">Register</button>
    <div class="text-center mt-2 text-primary" style="cursor:pointer" onclick="showLogin()">Login</div>
</div>

<!-- USER DASHBOARD -->
<div class="dashboard container" id="dashboard">
    <div class="d-flex justify-content-between bg-primary text-white p-3 rounded">
        <h4 id="welcomeUser"></h4>
        <button class="btn btn-light" onclick="logout()">Logout</button>
    </div>

    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card p-3 shadow">
                <h5>Mobile</h5>
                <p>â‚¹15000</p>
                <button class="btn btn-primary" onclick="addToCart('Mobile',15000)">Add</button>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-3 shadow">
                <h5>Laptop</h5>
                <p>â‚¹45000</p>
                <button class="btn btn-primary" onclick="addToCart('Laptop',45000)">Add</button>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-3 shadow">
                <h5>Headphones</h5>
                <p>â‚¹2000</p>
                <button class="btn btn-primary" onclick="addToCart('Headphones',2000)">Add</button>
            </div>
        </div>
    </div>

    <!-- CART -->
    <div class="cart">
        <h4>ðŸ›’ Cart</h4>
        <table class="table table-bordered mt-3">
            <thead>
                <tr>
                    <th>Sr No</th>
                    <th>Bill No</th>
                    <th>Product</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody id="cartBody"></tbody>
        </table>

        <div class="bill">
            <p>Subtotal: â‚¹<span id="subTotal">0</span></p>
            <p>GST (18%): â‚¹<span id="gst">0</span></p>
            <h5>Total: â‚¹<span id="grandTotal">0</span></h5>
            <button class="btn btn-success" onclick="checkout()">Checkout</button>
            <button class="btn btn-secondary" onclick="printInvoice()">Print Invoice</button>
        </div>
    </div>
</div>

<!-- ADMIN DASHBOARD -->
<div class="dashboard container" id="adminDashboard">
    <div class="d-flex justify-content-between bg-dark text-white p-3 rounded">
        <h4>Admin Bill History</h4>
        <button class="btn btn-light" onclick="logout()">Logout</button>
    </div>
    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th>Bill No</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody id="adminBills"></tbody>
    </table>
</div>

<script>
let sr = 0;
let billNo = Math.floor(Math.random()*100000);
let subtotal = 0;

function showRegister(){loginBox.style.display="none";registerBox.style.display="block";}
function showLogin(){registerBox.style.display="none";loginBox.style.display="block";}

function register(){
    localStorage.setItem("email",regEmail.value);
    localStorage.setItem("password",regPassword.value);
    alert("Registered!");
    showLogin();
}

function login(){
    if(loginEmail.value===localStorage.getItem("email") &&
       loginPassword.value===localStorage.getItem("password")){
        loginBox.style.display="none";
        dashboard.style.display="block";
        welcomeUser.innerText="Welcome "+loginEmail.value;
    } else alert("Invalid Login");
}

function adminLogin(){
    loginBox.style.display="none";
    adminDashboard.style.display="block";
    loadBills();
}

function addToCart(p,price){
    sr++; subtotal+=price;
    cartBody.innerHTML+=`<tr><td>${sr}</td><td>#${billNo}</td><td>${p}</td><td>${price}</td></tr>`;
    calculate();
}

function calculate(){
    let gst=subtotal*0.18;
    subTotal.innerText=subtotal;
    document.getElementById("gst").innerText=gst.toFixed(2);
    grandTotal.innerText=(subtotal+gst).toFixed(2);
}

function checkout(){
    let bills=JSON.parse(localStorage.getItem("bills")||"[]");
    bills.push({bill:billNo,total:grandTotal.innerText});
    localStorage.setItem("bills",JSON.stringify(bills));
    alert("Order Placed!");
}

function loadBills(){
    let bills=JSON.parse(localStorage.getItem("bills")||"[]");
    adminBills.innerHTML="";
    bills.forEach(b=>{
        adminBills.innerHTML+=`<tr><td>#${b.bill}</td><td>â‚¹${b.total}</td></tr>`;
    });
}

function printInvoice(){window.print();}

function logout(){
    dashboard.style.display="none";
    adminDashboard.style.display="none";
    loginBox.style.display="block";
}
</script>

</body>
</html>
